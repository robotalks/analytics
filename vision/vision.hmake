---
format: hypermake.v0

name: vision
description: Compute Vision

targets:
  build-vision-[arch:amd64,armhf]:
    description: build vision analyzer
    after:
      - build-nlohmann-json
      - build-ffmpeg-$[arch]
      - build-opencv-$[arch]
      - build-common-$[arch]
    watches:
      - inc
      - src
      - CMakeLists.txt
      - /cmake
    env:
      - MAKE_OPTS
    cmds:
      - build-cmake.sh $[arch] vision Release vision vision-perf
    artifacts:
      - /out/$[arch]/bin/vision
      - /out/$[arch]/bin/vision-perf
